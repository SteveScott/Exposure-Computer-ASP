"use strict";function SetCookie(n,t){var i=new Date,r;i.setTime(i.getTime()+31536e6);r="expires="+i.toUTCString();document.cookie=n+"="+t+";"+r+";path=/"}function GetCookie(n){for(var t,r=n+"=",f=decodeURIComponent(document.cookie),u=f.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return""}function calculation(n,t,i){var u,r,e,f;return u=Math.pow(2,12),e=12.5*Math.pow(t,2)/(n*i)-u,r=-1*(Math.log(u+e)/Math.log(2)+3-(Math.log(u)/Math.log(2)+3)),f="",f=r>-.5&&r<.5?"Level 15 - Sunny":r>-1.5&&r<-.5?"Level 16 - Bright daylight on sand or snow":r>-2.5&&r<-1.5?"Level 17 - Unnaturally bright":r>-3.5&&r<-2.5?"Level 18 - Unnaturally bright":r>-4.5&&r<-3.5?"Level 19 - Unnaturally bright":r<-4.6?"Level 20+ - Unnaturally bright":r>.5&&r<1.5?"Level 14 - Hazy sun":r>1.5&&r<2.5?"Level 13 - Cloudy-bright light (no shadows)":r>2.5&&r<3.5?"Level 12 - Shade or overcast":r>3.5&&r<4.5?"Level 11 - Sunset or deep shade":r>4.5&&r<5.5?"Level 10 - Immediately after sunset":r>5.5&&r<6.5?"Level 9 - Neon lights, spotlighted subjects":r>6.5&&r<7.5?"Level 8 - Fires, stadiums at night, bright indoor florescent lights":r>7.5&&r<8.5?"Level 7 - Night time streets, indoor sports, stage shows.":r>8.5&&r<9.5?"Level 6 - Brigthly lit home interiors, amusement parks":r>9.5&&r<10.5?"Level 5 - Night home interiors, average light, auditoriums, subjects lit by fire":r>10.5&&r<11.5?"Level 4 - Candle light, Christmas lights, floodlights, street lamps.":r>11.5&&r<12.5?"Level 3 - Fireworks (with long exposure)":r>12.5&&r<13.5?"Level 2 - Lightning (with long exposure)":r>13.5&&r<14.5?"Level 1 - Distant view of lighted skyline":r>14.5?"Level 0 or less - Dim ambient light":"Unknown",$("#ev").text(f),r}function ShutterSpeed_Slide(){shutterSpeed_Slider=parseInt($(this).val());shutterSpeedPosition=shutterSpeed_Slider;shutterSpeed_Slider==0?(ShutterSpeed=1/8e3,ShutterSpeedText="1/8000 s"):shutterSpeed_Slider==1?(ShutterSpeed=1/4e3,ShutterSpeedText="1/4000 s"):shutterSpeed_Slider==2?(ShutterSpeed=1/2e3,ShutterSpeedText="1/2000 s"):shutterSpeed_Slider==3?(ShutterSpeed=1/1e3,ShutterSpeedText="1/1000 s"):shutterSpeed_Slider==4?(ShutterSpeed=1/500,ShutterSpeedText="1/500 s"):shutterSpeed_Slider==5?(ShutterSpeed=1/250,ShutterSpeedText="1/250 s"):shutterSpeed_Slider==6?(ShutterSpeed=1/125,ShutterSpeedText="1/125 s"):shutterSpeed_Slider==7?(ShutterSpeed=1/60,ShutterSpeedText="1/60 s"):shutterSpeed_Slider==8?(ShutterSpeed=1/30,ShutterSpeedText="1/30 s"):shutterSpeed_Slider==9?(ShutterSpeed=1/15,ShutterSpeedText="1/15 s"):shutterSpeed_Slider==10?(ShutterSpeed=1/8,ShutterSpeedText="1/8 s"):shutterSpeed_Slider==11?(ShutterSpeed=1/4,ShutterSpeedText="1/4 s"):shutterSpeed_Slider==12?(ShutterSpeed=1/2,ShutterSpeedText="1/2 s"):shutterSpeed_Slider==13?(ShutterSpeed=1,ShutterSpeedText="1 s"):shutterSpeed_Slider==14?(ShutterSpeed=2,ShutterSpeedText="2 s"):shutterSpeed_Slider==15?(ShutterSpeed=4,ShutterSpeedText="4 s"):shutterSpeed_Slider==16?(ShutterSpeed=8,ShutterSpeedText="8 s"):shutterSpeed_Slider==17&&(ShutterSpeed=15,ShutterSpeedText="15 s");FlashCalc();$("#ShutterSpeedDisplay").text(ShutterSpeedText);Ev=calculation(ShutterSpeed,Fstop,Iso)}function FStop_Slide(){Fstop_slider=parseInt($(this).val());fstopPosition=Fstop_slider;Fstop=Fstop_slider==0?64:Fstop_slider==1?45:Fstop_slider==2?32:Fstop_slider==3?22:Fstop_slider==4?16:Fstop_slider==5?11:Fstop_slider==6?8:Fstop_slider==7?5.6:Fstop_slider==8?4:Fstop_slider==9?2.8:Fstop_slider==10?2:Fstop_slider==11?1.4:Fstop_slider==12?1:"unknown";FlashCalc();$("#FStopDisplay").text("F "+Fstop);Ev=calculation(ShutterSpeed,Fstop,Iso)}function Iso_Slide(){iso_slider=parseInt($(this).val());isoPosition=iso_slider;Iso=iso_slider==0?25:iso_slider==1?50:iso_slider==2?100:iso_slider==3?200:iso_slider==4?400:iso_slider==5?800:iso_slider==6?1600:iso_slider==7?3200:"unknown";FlashCalc();$("#IsoDisplay").text(Iso);Ev=calculation(ShutterSpeed,Fstop,Iso)}function FlashCalc(){calculateGN();var n=Number(newGuideNumber);flashDistMeter=n/Fstop;flashDistMeter=roundTwoDecimal(flashDistMeter);flashDistFeet=flashDistMeter*3.28084;flashDistFeet=roundTwoDecimal(flashDistFeet);flashDistMeter.toString().length<4&&(flashDistMeter=flashDistMeter.toString()+"0");$("#GNDisplayMeters").text(flashDistMeter+" m");$("#GNDisplayFeet").text(flashDistFeet+" ft");flashDistMeter==0&&($("#GNDisplayMeters").text("0.00 m"),$("#GNDisplayFeet").text("0.00 ft"))}function calculateGN(){function t(i){if(i==100)return n;i>100?(n+=1,i=i/2,t(i)):i<100&&(n-=1,i=i*2,t(i))}function i(n){if(n==0)return Number(newGuideNumber);n>0?(newGuideNumber=Number(newGuideNumber)*Math.sqrt(2),n-=1,i(n)):n<0&&(newGuideNumber=Number(newGuideNumber)/Math.sqrt(2),n+=1,i(n))}var r=document.getElementById("GN").value,u=Iso,n=0;guideNumber=r;newGuideNumber=r;t(Iso);i(n)}function roundTwoDecimal(n){return Math.round(n*100)/100}var Fstop=16,LightLevel,ShutterSpeed=.008,Iso=100,Ev=0,guideNumber=0,ShutterSpeedText="1/125",fstopPosition=4,shutterSpeedPosition=6,isoPosition=2,shutterSpeedSlider,shutterSpeedTooltip,fStopTooltip,isoTooltip,flashDistMeter,flashDistFeet,newGuideNumber;GetCookie("Fstop")!=""&&(Fstop=GetCookie("Fstop"),ShutterSpeed=GetCookie("ShutterSpeed"),Iso=GetCookie("Iso"),Ev=GetCookie("Ev"),LightLevel=GetCookie("LightLevel"),guideNumber=GetCookie("guideNumber"),ShutterSpeedText=GetCookie("ShutterSpeedText"),fstopPosition=GetCookie("fstopPosition"),shutterSpeedPosition=GetCookie("shutterSpeedPosition"),isoPosition=GetCookie("isoPosition"));shutterSpeedSlider=$("#ShutterSpeed").slider();shutterSpeedTooltip=$("#ShutterSpeed.tooltip.tooltip-inner");$(document).ready(function(){$("#FStop").attr("data-slider-value",fstopPosition);$("#Iso").attr("data-slider-value",isoPosition);$("#GN").val(guideNumber);FlashCalc();calculation(ShutterSpeed,Fstop,Iso);$("#ShutterSpeed").slider({tooltip:"always",formatter:function(){return ShutterSpeedText}}).on("change",ShutterSpeed_Slide).data("slider");$("#FStop").slider({tooltip:"always",formatter:function(){return"F "+Fstop}}).on("change",FStop_Slide).data("slider");$("#Iso").slider({tooltip:"always",formatter:function(){return Iso}}).on("change",Iso_Slide).data("slider");$("#GN")[0].addEventListener("input",FlashCalc,!1);$("#ShutterSpeed").slider("setAttribute","max",17);$("#ShutterSpeed").slider("setAttribute","value",shutterSpeedPosition);$("#ShutterSpeed").slider("setAttribute","data-slider-handle","triangle");$("#ShutterSpeed").slider("setAttribute");$("#ShutterSpeed").slider("refresh");window.addEventListener("beforeunload",function(){SetCookie("Fstop",Fstop);SetCookie("LightLevel",LightLevel);SetCookie("ShutterSpeed",ShutterSpeed);SetCookie("Iso",Iso);SetCookie("Ev",Ev);SetCookie("guideNumber",guideNumber);SetCookie("ShutterSpeedText",ShutterSpeedText);SetCookie("fstopPosition",fstopPosition);SetCookie("shutterSpeedPosition",shutterSpeedPosition);SetCookie("isoPosition",isoPosition)},!1)});